<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <link rel="shortcut icon" href="#">
    <title>jsPDF fix UTF-8 by John</title>

    <!-- 如果網頁也要看到字型需要 CDN -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Rampart+One&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Klee+One&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">

    <style>
        #content {
            margin: 10px;
            padding: 10px 40px;
            width: 500px;
            border: 1px solid black;
            background-color: antiquewhite;
        }

        h1 {
            color: green;
            /* font-family: 'RampartOne-Regular', 'Rampart One', cursive; */
            font-family: 'Roboto', sans-serif;

        }

        h2,
        h3 {
            font-family: 'RampartOne-Regular', 'Rampart One', cursive;
            color: blueviolet;
        }

        p {
            color: brown;
            /* font-family: 'KleeOne-Regular', 'Klee One', cursive; */
            font-family: 'Roboto', sans-serif;
        }
    </style>


</head>

<body>

    <div id="content">
        <h1>台北 ✹ </h1>
        <h2>ゃないといけない 👀 </h2>
        <h3>some English</h3>
        <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem
            Ipsum has been the industry's standard dummy text ever since the 1500s, when an
            unknown printer took a galley of type and scrambled it to make a type specimen book. It
            has survived not only five centuries, but also the leap into electronic typesetting,
            remaining essentially unchanged. It was popularised in the 1960s with the release of
            Letraset sheets containing Lorem Ipsum passages, and more recently with desktop
            publishing software like Aldus PageMaker including versions of Lorem Ipsum.
            It is a long established fact that a reader will be distracted by the readable content of a
            page when looking at its layout. The point of using Lorem Ipsum is that it has a more-orless normal
            distribution of letters, as opposed to using 'Content here, content here',
            making it look like readable English. Many desktop publishing packages and web page
            editors now use Lorem Ipsum as their default model text, and a search for 'lorem ipsum'
            will uncover many web sites still in their infancy. Various versions have evolved over the
            years, sometimes by accident, sometimes on purpose (injected humour and the like).</p>
        <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem
            Ipsum has been the industry's standard dummy text ever since the 1500s, when an
            unknown printer took a galley of type and scrambled it to make a type specimen book. It
            has survived not only five centuries, but also the leap into electronic typesetting,
            remaining essentially unchanged. It was popularised in the 1960s with the release of
            Letraset sheets containing Lorem Ipsum passages, and more recently with desktop
            publishing software like Aldus PageMaker including versions of Lorem Ipsum.
            It is a long established fact that a reader will be distracted by the readable content of a
            page when looking at its layout. The point of using Lorem Ipsum is that it has a more-orless normal
            distribution of letters, as opposed to using 'Content here, content here',
            making it look like readable English. Many desktop publishing packages and web page
            editors now use Lorem Ipsum as their default model text, and a search for 'lorem ipsum'
            will uncover many web sites still in their infancy. Various versions have evolved over the
            years, sometimes by accident, sometimes on purpose (injected humour and the like).</p>
        <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem
            Ipsum has been the industry's standard dummy text ever since the 1500s, when an
            unknown printer took a galley of type and scrambled it to make a type specimen book. It
            has survived not only five centuries, but also the leap into electronic typesetting,
            remaining essentially unchanged. It was popularised in the 1960s with the release of
            Letraset sheets containing Lorem Ipsum passages, and more recently with desktop
            publishing software like Aldus PageMaker including versions of Lorem Ipsum.
            It is a long established fact that a reader will be distracted by the readable content of a
            page when looking at its layout. The point of using Lorem Ipsum is that it has a more-orless normal
            distribution of letters, as opposed to using 'Content here, content here',
            making it look like readable English. Many desktop publishing packages and web page
            editors now use Lorem Ipsum as their default model text, and a search for 'lorem ipsum'
            will uncover many web sites still in their infancy. Various versions have evolved over the
            years, sometimes by accident, sometimes on purpose (injected humour and the like).</p>
        <p>全角じゃないといけない：数字も３２１</p>
        <p>他是強烈的喜⋯覺得這會說人喜歡真味，累了所以點的東種感，しんがたコロナウイルスの検査けんさをしに来きた1130人にんを調しらべました。ワクチンの注射ちゅうしゃをしたかどうかについてです。因為一直沒⋯赤楚得吃飯完是好。好想了但知道不行我看到了，應該才知，小沒有設定堆人以做就是，到了消息啊啊啊整個⋯來就是我好像攻也只：看起來明天。
        </p>
    </div>


    <a href="" onclick="download_pdf();">Download to pdf</a>
    <a id="download" download="Image.jpg" href="" onclick="download_img(this);">Download to jpg</a>



    <script src="https://unpkg.com/html2canvas@1.3.2/dist/html2canvas.js"></script> <!-- for jsPDF HTML Method -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.3.1/jspdf.umd.min.js"></script>
    <script>
        const { jsPDF } = window.jspdf;
        const doc = new jsPDF('l', 'pt', 'a4', false);
    </script>
    <!-- custom font definition -->
    <!-- jsPDF fontconverter for Base64:  https://rawgit.com/MrRio/jsPDF/master/fontconverter/fontconverter.html -->
    <script src="font/RampartOne-Regular-normal.js"></script>
    <!-- https://fonts.google.com/specimen/Rampart+One?subset=japanese#standard-styles -->
    <script src="font/KleeOne-Regular-normal.js"></script>
    <!-- https://fonts.google.com/specimen/Klee+One?subset=japanese#standard-styles -->
    <script src="font/SawarabiMincho-Regular-normal.js"></script>
    <!-- https://fonts.google.com/specimen/Sawarabi+Mincho?subset=japanese -->
    <script>

        // 注意：jsPDF fontconverter 只針對 ttf 的字型有支援， otf 字型我試好幾種方法都失敗
        // 注意：jsPDF fontconverter 轉出來的 js 檔，需要刪掉變數以外的程式碼（第一行與最後四行）
        // 步驟：先在 google font 選好字型（要找 ttf 格式） > 用上面網址轉成 base64 格式碼
        // 將字型 base64 格式碼放入一個變數中。( 範例中的字型js檔，內有變數： font、font2 ）
        // 特別說明：由於字型 base64 格式 "只" 載入 pdfjs 構造函數的實例記憶體中，網頁本身並沒有該字體，如果要網頁看得到需要再另外 CDN 進去（上面有示範）

        doc.addFileToVFS('font/RampartOne-Regular-normal.ttf', font);
        doc.addFont('font/RampartOne-Regular-normal.ttf', 'RampartOne-Regular', 'normal');

        doc.addFileToVFS('font/KleeOne-Regular-normal.ttf', font2);
        doc.addFont('font/KleeOne-Regular-normal.ttf', 'KleeOne-Regular', 'normal');

        doc.addFileToVFS('font/SawarabiMincho-Regular-normal.ttf', font3);
        doc.addFont('font/SawarabiMincho-Regular.ttf', 'SawarabiMincho-Regular', 'normal');

    </script>


    <script>


        // PDF
        doc.html(document.getElementById('content'))

        function download_pdf() {
            // doc.save('utf8_font.pdf')
            doc.output('dataurlnewwindow');
        }




        // JPG
        var image;
        html2canvas(document.getElementById('content')).then(canvas => {
            image = canvas.toDataURL("image/jpg")
        })

        function download_img(e) {
            e.href = image
        }


    </script>
</body>

</html>